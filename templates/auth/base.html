{% load static %}
<!doctype html>
<html class="no-js" lang="uz">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Kirish - Ta'lim Tizimi</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Place favicon.ico in the root directory -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/images/logo/favicon.svg' %}">
    <!-- CSS here -->
    <link rel="stylesheet" href="{% static 'assets/css/vendor/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/vendor/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/swiper.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/vendor/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/vendor/fontawesome-pro.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/nouislider.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/vendor/icomoon.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/vendor/spacing.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/apexcharts.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/main.css' %}">
</head>

<body>

    <!-- preloader start -->
    <div id="loading">
        <div id="loading-center">
            <div id="loading-center-absolute">
                <div class="bd-preloader-content">
                    <div class="bd-preloader-logo">
                        <div class="bd-preloader-circle">
                            <svg width="190" height="190" viewBox="0 0 380 380" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle stroke="#F5F5F5" cx="190" cy="190" r="180" stroke-width="6" stroke-linecap="round">
                                </circle>
                                <circle stroke="red" cx="190" cy="190" r="180" stroke-width="6" stroke-linecap="round">
                                </circle>
                            </svg>
                        </div>
                        <img src="{% static 'assets/images/logo/preloader-icon.png' %}" alt="">
                    </div>
                    <p class="bd-preloader-subtitle">Yuklanmoqda...</p>
                </div>
            </div>
        </div>
    </div>
    <!-- preloader end -->

    <!-- Body main wrapper start -->
    <main>

        <!-- sign form area start -->
        <section class="bd-authentication-cover-main ">
            <div class="row h100vh mx-0">
                <div class="col-xxl-6 col-xl-5 col-lg-12 d-xl-block d-none px-0">
                    <div class="bd-authentication-cover overflow-hidden" style="background-image: url('{% static 'assets/images/contact/sign-in-bg.webp' %}');">
                        <div class="bd-authentication-cover-content d-flex-center">
                            <div class="bd-section-title-wrapper">
                                <h2 class="bd-section-title mb-20">Xush kelibsiz!</h2>
                                <p class="bd-section-paragraph">Ta'lim tizimiga kirish uchun ma'lumotlaringizni kiriting.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-6 col-xl-7">
                    <div class="row justify-content-center align-items-center h100p">
                        <div class="col-xxl-7 col-xl-9 col-lg-6 col-md-6 col-sm-8 col-12">
                            <div class="bd-authentication-form-wrapper">
                                <div class="bd-authentication-form-logo">
                                    <a href="{% url 'home' %}"><img src="{% static 'assets/images/logo/logo.svg' %}" alt="logo"></a>
                                </div>
                                <h3 class="title mb-10">Tizimga kirish</h3>
                                <p class="subtitle">Telefon raqam va parol orqali kiring</p>

                                <!-- Django messages -->
                                {% if messages %}
                                    {% for message in messages %}
                                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                            {{ message }}
                                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                        </div>
                                    {% endfor %}
                                {% endif %}

                                <form method="POST" action="{% url 'users:login' %}">
                                    {% csrf_token %}

                                    <!-- Telefon raqami -->
                                    <div class="form-input-box mb-20">
                                        <div class="form-input-title">
                                            <label for="phone">Telefon raqami <span>*</span></label>
                                        </div>
                                        <div class="form-input">
                                            {{ form.phone }}
                                            {% if form.phone.errors %}
                                                <div class="text-danger small mt-1">
                                                    {{ form.phone.errors.0 }}
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>

                                    <!-- Parol -->
                                    <div class="form-input-box mb-20">
                                        <div class="form-input-title">
                                            <label for="password">Parol <span>*</span></label>
                                        </div>
                                        <div class="form-input">
                                            {{ form.password }}
                                            {% if form.password.errors %}
                                                <div class="text-danger small mt-1">
                                                    {{ form.password.errors.0 }}
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>

                                    <div class="d-flex-between mb-20">
                                        <div class="checkout-option">
                                            {{ form.remember_me }}
                                            <label for="rememberMe">Meni eslab qol</label>
                                        </div>
                                        <div class="sign-forgot underline">
                                            <a href="{% url 'users:forgot_password' %}" class="sign-link">Parolni unutdingizmi?</a>
                                        </div>
                                    </div>

                                    <div class="bd-sign-btn">
                                        <button type="submit" class="bd-btn btn-primary w-100">Kirish</button>
                                    </div>
                                </form>

                                <div class="bd-divider-wrapper">
                                    <div class="bd-divider-line left-line"></div>
                                    <span class="bd-divider-title">YOKI</span>
                                    <div class="bd-divider-line"></div>
                                </div>

                                <div class="bd-alter-sign mb-20">
                                    <a href="{% url 'users:phone_login' %}" class="bd-btn btn-outline-primary w-100">
                                        <span class="thumb">
                                            <i class="fa fa-mobile"></i>
                                        </span>
                                        SMS kod orqali kirish
                                    </a>
                                </div>

                                <div class="bd-sign-up-label underline-two text-center">
                                    Hisobingiz yo'qmi? <a href="{% url 'users:register' %}" class="sign-link">Ro'yxatdan o'tish</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- sign form area end -->

    </main>
    <!-- Body main wrapper end -->

    <!-- back to top -->
    <div class="backtotop-wrap cursor-pointer">
        <svg class="backtotop-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
            <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
        </svg>
    </div>
    <!-- Backtotop end -->

    <!-- JS here -->
    <script src="{% static 'assets/js/vendor/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/waypoints.min.js' %}"></script>
    <script src="{% static 'assets/js/vendor/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/swiper.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/wow.js' %}"></script>
    <script src="{% static 'assets/js/vendor/magnific-popup.min.js' %}"></script>
    <script src="{% static 'assets/js/vendor/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'assets/js/vendor/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/nice-select.min.js' %}"></script>
    <script src="{% static 'assets/js/vendor/ajax-form.js' %}"></script>
    <script src="{% static 'assets/js/plugins/easypie.js' %}"></script>
    <script src="{% static 'assets/js/vendor/purecounter.js' %}"></script>
    <script src="{% static 'assets/js/plugins/nouislider.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/apexcharts.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/typed.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>

    <!-- Custom scripts -->
    <script>
        // Telefon raqam formatlash
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (!value.startsWith('998')) {
                value = '998' + value;
            }
            if (value.length > 12) {
                value = value.slice(0, 12);
            }
            e.target.value = '+' + value;
        });
    </script>
</body>

</html>